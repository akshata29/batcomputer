{"source":2,"revision":18,"description":null,"createdBy":{"displayName":"Ben Coleman","url":"https://spsprodweu3.vssps.visualstudio.com/A40a38c72-9e96-4ee0-9057-3eb12507fbbd/_apis/Identities/81613f75-f6e3-49cb-abdf-ff2ba28a0d03","_links":{"avatar":{"href":"https://dev.azure.com/bencoleman/_apis/GraphProfile/MemberAvatars/aad.YjMxYTRlM2UtY2YwZi03YWJjLTkzMTgtOWZkOGQ1OTg2N2Ez"}},"id":"81613f75-f6e3-49cb-abdf-ff2ba28a0d03","uniqueName":"becolem@microsoft.com","imageUrl":"https://dev.azure.com/bencoleman/_api/_common/identityImage?id=81613f75-f6e3-49cb-abdf-ff2ba28a0d03","descriptor":"aad.YjMxYTRlM2UtY2YwZi03YWJjLTkzMTgtOWZkOGQ1OTg2N2Ez"},"createdOn":"2018-11-06T16:29:20.910Z","modifiedBy":{"displayName":"Ben Coleman","url":"https://spsprodweu3.vssps.visualstudio.com/A40a38c72-9e96-4ee0-9057-3eb12507fbbd/_apis/Identities/81613f75-f6e3-49cb-abdf-ff2ba28a0d03","_links":{"avatar":{"href":"https://dev.azure.com/bencoleman/_apis/GraphProfile/MemberAvatars/aad.YjMxYTRlM2UtY2YwZi03YWJjLTkzMTgtOWZkOGQ1OTg2N2Ez"}},"id":"81613f75-f6e3-49cb-abdf-ff2ba28a0d03","uniqueName":"becolem@microsoft.com","imageUrl":"https://dev.azure.com/bencoleman/_api/_common/identityImage?id=81613f75-f6e3-49cb-abdf-ff2ba28a0d03","descriptor":"aad.YjMxYTRlM2UtY2YwZi03YWJjLTkzMTgtOWZkOGQ1OTg2N2Ez"},"modifiedOn":"2019-03-07T19:26:21.747Z","isDeleted":false,"variables":{"acr.name":{"value":"bcdemo"},"azure.resgroup":{"value":"temp.titanic"},"version":{"value":"$(Release.Artifacts.titanic-image.BuildId)"}},"variableGroups":[5],"environments":[{"id":4,"name":"test","rank":1,"owner":{"displayName":"Ben Coleman","url":"https://spsprodweu3.vssps.visualstudio.com/A40a38c72-9e96-4ee0-9057-3eb12507fbbd/_apis/Identities/81613f75-f6e3-49cb-abdf-ff2ba28a0d03","_links":{"avatar":{"href":"https://dev.azure.com/bencoleman/_apis/GraphProfile/MemberAvatars/aad.YjMxYTRlM2UtY2YwZi03YWJjLTkzMTgtOWZkOGQ1OTg2N2Ez"}},"id":"81613f75-f6e3-49cb-abdf-ff2ba28a0d03","uniqueName":"becolem@microsoft.com","imageUrl":"https://dev.azure.com/bencoleman/_api/_common/identityImage?id=81613f75-f6e3-49cb-abdf-ff2ba28a0d03","descriptor":"aad.YjMxYTRlM2UtY2YwZi03YWJjLTkzMTgtOWZkOGQ1OTg2N2Ez"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":10}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":11},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":12}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":51,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"068d5909-43e6-48c5-9e01-7c8a94816220","version":"0.*","name":"Install Helm","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"helmVersion":"2.12.0","checkLatestHelmVersion":"false","installKubeCtl":"true","kubectlVersion":"1.8.9","checkLatestKubeCtl":"true"}},{"environment":{},"taskId":"afa7d54d-537b-4dc8-b60a-e0eeea2c9a87","version":"0.*","name":"Helm Deploy Batcomputer Chart","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectionType":"Azure Resource Manager","azureSubscriptionEndpoint":"535c0bca-5784-48ad-a92b-beaac0f45237","azureResourceGroup":"Demo.Containers","kubernetesCluster":"aks2019","kubernetesServiceEndpoint":"","namespace":"","command":"upgrade","chartType":"FilePath","chartName":"","chartPath":"$(System.DefaultWorkingDirectory)/batcomputer-src/kubernetes/helm/batcomputer","version":"","releaseName":"$(Release.EnvironmentName)","overrideValues":"api.imageTag=$(Release.Artifacts.acr-image.BuildNumber)","valueFile":"$(System.DefaultWorkingDirectory)/batcomputer-src/kubernetes/helm/myvalues.yaml","destination":"$(Build.ArtifactStagingDirectory)","canaryimage":"false","upgradetiller":"true","updatedependency":"false","save":"true","install":"true","recreate":"false","resetValues":"false","force":"false","waitForExecution":"true","arguments":"--install","enableTls":"false","caCert":"","certificate":"","privatekey":"","tillernamespace":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":108,"url":"https://vsrm.dev.azure.com/bencoleman/0e6c25b9-ab70-4701-8460-2468c8ea9b3a/_apis/Release/releases/108","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/bencoleman/_apis/public/Release/badge/0e6c25b9-ab70-4701-8460-2468c8ea9b3a/3/4"},{"id":12,"name":"staging","rank":2,"owner":{"displayName":"Ben Coleman","url":"https://spsprodweu3.vssps.visualstudio.com/A40a38c72-9e96-4ee0-9057-3eb12507fbbd/_apis/Identities/81613f75-f6e3-49cb-abdf-ff2ba28a0d03","_links":{"avatar":{"href":"https://dev.azure.com/bencoleman/_apis/GraphProfile/MemberAvatars/aad.YjMxYTRlM2UtY2YwZi03YWJjLTkzMTgtOWZkOGQ1OTg2N2Ez"}},"id":"81613f75-f6e3-49cb-abdf-ff2ba28a0d03","uniqueName":"becolem@microsoft.com","imageUrl":"https://dev.azure.com/bencoleman/_api/_common/identityImage?id=81613f75-f6e3-49cb-abdf-ff2ba28a0d03","descriptor":"aad.YjMxYTRlM2UtY2YwZi03YWJjLTkzMTgtOWZkOGQ1OTg2N2Ez"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":34}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":35},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":36}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":51,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"068d5909-43e6-48c5-9e01-7c8a94816220","version":"0.*","name":"Install Helm","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"helmVersion":"2.12.0","checkLatestHelmVersion":"false","installKubeCtl":"true","kubectlVersion":"1.8.9","checkLatestKubeCtl":"true"}},{"environment":{},"taskId":"afa7d54d-537b-4dc8-b60a-e0eeea2c9a87","version":"0.*","name":"Helm Deploy Batcomputer Chart","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connectionType":"Azure Resource Manager","azureSubscriptionEndpoint":"535c0bca-5784-48ad-a92b-beaac0f45237","azureResourceGroup":"Demo.Containers","kubernetesCluster":"aks2019","kubernetesServiceEndpoint":"","namespace":"","command":"upgrade","chartType":"FilePath","chartName":"","chartPath":"$(System.DefaultWorkingDirectory)/batcomputer-src/kubernetes/helm/batcomputer","version":"","releaseName":"$(Release.EnvironmentName)","overrideValues":"api.imageTag=$(Release.Artifacts.acr-image.BuildNumber)","valueFile":"$(System.DefaultWorkingDirectory)/batcomputer-src/kubernetes/helm/myvalues.yaml","destination":"$(Build.ArtifactStagingDirectory)","canaryimage":"false","upgradetiller":"true","updatedependency":"false","save":"true","install":"true","recreate":"false","resetValues":"false","force":"false","waitForExecution":"true","arguments":"--install","enableTls":"false","caCert":"","certificate":"","privatekey":"","tillernamespace":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"test","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":108,"url":"https://vsrm.dev.azure.com/bencoleman/0e6c25b9-ab70-4701-8460-2468c8ea9b3a/_apis/Release/releases/108","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/bencoleman/_apis/public/Release/badge/0e6c25b9-ab70-4701-8460-2468c8ea9b3a/3/12"}],"artifacts":[{"sourceId":"535c0bca-5784-48ad-a92b-beaac0f45237:bencmldemo3408602738.azurecr.io:batcomputer-model-api","type":"AzureContainerRepository","alias":"acr-image","definitionReference":{"connection":{"id":"535c0bca-5784-48ad-a92b-beaac0f45237","name":"Microsoft (AIRS) (52512f28-c6ed-403e-9569-82a9fb9fec91)"},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"batcomputer-model-api","name":"batcomputer-model-api"},"registryurl":{"id":"bencmldemo3408602738.azurecr.io","name":"bencmldemo3408602738"},"resourcegroup":{"id":"Demo.AzureML","name":"Demo.AzureML"}},"isRetained":false},{"sourceId":"1f362326-cbb0-4ee5-947f-120a3484b3e3:benc-uk/batcomputer","type":"GitHub","alias":"batcomputer-src","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://github.com/benc-uk/batcomputer","name":""},"branch":{"id":"master","name":"master"},"checkoutNestedSubmodules":{"id":"True","name":"Any nested submodules within"},"checkoutSubmodules":{"id":"","name":""},"connection":{"id":"1f362326-cbb0-4ee5-947f-120a3484b3e3","name":"GitHub connection benc-uk"},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionType":{"id":"latestFromBranchType","name":"Latest from the default branch"},"definition":{"id":"benc-uk/batcomputer","name":"benc-uk/batcomputer"},"fetchDepth":{"id":"","name":""},"gitLfsSupport":{"id":"","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[{"alias":"acr-image","tagFilters":[],"triggerType":4}],"releaseNameFormat":"Release-$(rev:r)","tags":[],"pipelineProcess":{"type":1},"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"Other"}},"id":3,"name":"Deploy Batcomputer to AKS","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/bencoleman/0e6c25b9-ab70-4701-8460-2468c8ea9b3a/_apis/Release/definitions/3","_links":{"self":{"href":"https://vsrm.dev.azure.com/bencoleman/0e6c25b9-ab70-4701-8460-2468c8ea9b3a/_apis/Release/definitions/3"},"web":{"href":"https://dev.azure.com/bencoleman/0e6c25b9-ab70-4701-8460-2468c8ea9b3a/_release?definitionId=3"}}}